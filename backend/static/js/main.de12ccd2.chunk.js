(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(69)},37:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),o=a(5),r=a.n(o),l=(a(35),a(37),a(7)),c=a(21),i=a(13),u=a(22),m=a(23),d=a(28),h=a(24),p=a(29),f=a(6),g=a.n(f),E=a(25),k=a.n(E),v=a(73),b=a(26),w=a.n(b),S=a(3);v.a.addLocale(w.a);var y=new v.a("en-US"),L=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).readLocalStorage=function(){var e=localStorage.getItem("username"),t=localStorage.getItem("password"),n=!(!e||!t)&&{username:e,password:t};return n&&a.setState({auth:n}),n},a.refreshList=function(){var e=a.readLocalStorage();g.a.get("http://localhost:8000/api/tasks/",{auth:e||a.state.auth}).then(function(e){localStorage.setItem("username",a.state.auth.username),localStorage.setItem("password",a.state.auth.password),a.setState({todoList:e.data,authModal:!1})}).catch(function(e){console.log(e.response.status),401===e.response.status&&a.setState({authModal:!0})})},a.renderItems=function(){var e=a.state.todoList;return"all"!==a.state.filter&&(e=e.filter(function(e){return e.task.includes(a.state.filter)})),e.map(function(e){return s.a.createElement("li",{key:e.id,className:"list-group-item d-flex justify-content-between align-items-center"},s.a.createElement("div",{className:"d-flex w-100 justify-content-between"},s.a.createElement("div",{className:"text-center switch-button-todo"},s.a.createElement(k.a,{onstyle:"success",checked:e.is_completed,onlabel:"\u2713",offlabel:"\u2713",onChange:function(){return a.handleDone(e)}})),s.a.createElement("div",{className:"pl-3 pr-3 ".concat(e.is_completed?"line-through":"")},a.renderTask(e.task)),s.a.createElement("div",{className:"text-center time-ago"},s.a.createElement("small",null,y.format(new Date(e.created_at))),s.a.createElement("br",null),s.a.createElement("button",{type:"button",className:"btn btn-sm btn-link btn-delete",onClick:function(){return a.toggle(e)}},s.a.createElement("small",null,"Delete")))))})},a.renderTags=function(){var e=a.state.todoList,t=[];return e.forEach(function(e){var a,n=e.task.match(/#\w[^!\W]+/g);console.log(n),n&&(a=t).push.apply(a,Object(i.a)(n))}),t=new Set(t),(t=Object(i.a)(t)).map(function(e,t){return s.a.createElement("button",{key:t,className:"ml-1 btn btn-sm btn-outline-primary ".concat(a.state.filter===e?"active":""),onClick:function(){return a.setState({filter:e})}},e)})},a.renderTask=function(e){return e.split(" ").map(function(e,t){return e.includes("#")?s.a.createElement("a",{className:"mr-1 text-primary cursor-pointer",key:t,onClick:function(){return a.setState({filter:e})}},e):e+" "})},a.handleSubmit=function(e){var t=a.readLocalStorage();g.a.post("http://localhost:8000/api/tasks/",e,{auth:t||a.state.auth}).then(function(e){return a.refreshList()}).catch(function(e){console.log(e.response.status),401===e.response.status&&a.setState({authModal:!0})})},a.handleDone=function(e){var t=a.readLocalStorage();e.is_completed=!e.is_completed,g.a.put("http://localhost:8000/api/tasks/".concat(e.id,"/"),e,{auth:t||a.state.auth}).then(function(e){return a.refreshList()}).catch(function(e){console.log(e.response.status),401===e.response.status&&a.setState({authModal:!0})})},a.handleDelete=function(e){var t=a.readLocalStorage();a.setState({modal:!1}),g.a.delete("http://localhost:8000/api/tasks/".concat(e.id),{auth:t||a.state.auth}).then(function(e){return a.refreshList()}).catch(function(e){console.log(e.response.status),401===e.response.status&&a.setState({authModal:!0})})},a.handleChange=function(e){var t=e.target,n=t.name,s=t.value,o=Object(c.a)({},a.state.auth,Object(l.a)({},n,s));a.setState({auth:o})},a.handleAuth=function(){var e=a.state.auth;"login"===a.state.signupOrLogin?a.refreshList():g.a.post("http://localhost:8000/api/users/",e).then(function(t){201===t.status&&(a.setState({auth:e}),a.refreshList())})},a.createItem=function(e){if("Enter"===e.key){var t={task:a.state.newTaskInput};a.handleSubmit(t),a.refreshList(),a.setState({newTaskInput:""})}},a.logout=function(){localStorage.clear(),window.location.reload(!1)},a.toggle=function(e){a.setState({selectedItem:e,modal:!a.state.modal})},a.state={newTaskInput:"",filter:"all",selectedItem:{},modal:!1,authModal:!0,todoList:[],auth:{},signupOrLogin:"login"},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.refreshList()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container-fluid text-dark"},!this.state.authModal&&s.a.createElement("main",null,s.a.createElement("div",{className:"row bg-light pl-5 pr-5 pt-1 pb-1 mb-3"},s.a.createElement("div",{className:"col-8 offset-2"},s.a.createElement("div",{className:"form-group mt-3"},s.a.createElement("input",{autoComplete:"off",name:"task",type:"text",className:"form-control",value:this.state.newTaskInput,onChange:function(t){e.setState({newTaskInput:t.target.value})},onKeyDown:this.createItem,placeholder:"Task to be done.. You can use #tag to tag your task."}),s.a.createElement("small",{className:"form-text text-muted text-center"},s.a.createElement("b",null,"\ud83d\udece\ufe0f Tip:")," Please press ",s.a.createElement("kbd",null,"\u21b5")," key to automaticly create a task. You can use #tag to tag your task."),s.a.createElement("p",{className:"text-center mt-2"},"Logged as ",this.state.auth.username,s.a.createElement("span",{className:"text-primary cursor-pointer",onClick:this.logout}," logout"),"."),s.a.createElement("div",{className:"invalid-feedback"})))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6 offset-3"},this.state.todoList.length>0?s.a.createElement("button",{className:"btn btn-outline-primary ".concat("all"===this.state.filter?"active":""),onClick:function(){return e.setState({filter:"all"})}},"All"):"Please add some todos.",this.renderTags())),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6 offset-3"},s.a.createElement("ul",{className:"list-group list-group-flush"},this.renderItems())))),this.renderDeleteModal(),this.renderLoginModal())}},{key:"renderDeleteModal",value:function(){var e=this;return s.a.createElement(S.f,{isOpen:this.state.modal,toggle:this.toggle},s.a.createElement(S.i,{toggle:this.toggle}," Todo Item "),s.a.createElement(S.g,null,this.state.selectedItem.task),s.a.createElement(S.h,null,s.a.createElement(S.a,{color:"danger",onClick:function(){return e.handleDelete(e.state.selectedItem)}},"Remove")))}},{key:"renderLoginModal",value:function(){var e=this;return s.a.createElement(S.f,{isOpen:this.state.authModal},s.a.createElement(S.g,null,s.a.createElement("h1",{className:"d-inline cursor-pointer ".concat("login"===this.state.signupOrLogin?"text-primary":"text-secondary"," "),onClick:function(){return e.setState({signupOrLogin:"login"})}},"Login"),s.a.createElement("h1",{className:"d-inline cursor-pointer ml-2 ".concat("signup"===this.state.signupOrLogin?"text-primary":"text-secondary"," "),onClick:function(){return e.setState({signupOrLogin:"signup"})}},"Sign up"),s.a.createElement(S.b,null,s.a.createElement(S.c,null,s.a.createElement(S.e,{for:"username"},"Username"),s.a.createElement(S.d,{type:"username",name:"username",id:"username",onChange:this.handleChange})),s.a.createElement(S.c,null,s.a.createElement(S.e,{for:"password"},"Password"),s.a.createElement(S.d,{type:"password",name:"password",id:"password",onChange:this.handleChange})),s.a.createElement(S.a,{onClick:this.handleAuth},"Submit"))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.de12ccd2.chunk.js.map